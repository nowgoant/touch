/*! touch 04-01-2015 */
"use strict";!function(a,b){"function"==typeof define&&(define.amd||define.cmd)?define(b):a.touch=b()}(this,function(){var a,b="ontouchstart"in window,c=navigator.pointerEnabled,d=navigator.msPointerEnabled,e=window.document,f=["mousedown","mousemove","mouseup",""];b?f=["touchstart","touchmove","touchend","touchcancel"]:c?f=["pointerdown","pointermove","pointerup","pointercancel"]:d&&(f=["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"]),a={PCevts:{touchstart:f[0],touchmove:f[1],touchend:f[2],touchcancel:f[3]},hasTouch:b},a.getType=function(a){return Object.prototype.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},a.getSelector=function(a){if(a.id)return"#"+a.id;if(a.className){var b=a.className.split(/\s+/);return"."+b.join(".")}return a===document?"body":a.tagName.toLowerCase()},a.matchSelector=function(a,b){return a.webkitMatchesSelector(b)},a.getEventListeners=function(a){return a.listeners},a.getPCevts=function(a){return this.PCevts[a]||a},a.forceReflow=function(){var a="reflowDivBlock",b=e.getElementById(a);b||(b=e.createElement("div"),b.id=a,e.body.appendChild(b));var c=b.parentNode,d=b.nextSibling;c.removeChild(b),c.insertBefore(b,d)},a.getPosOfEvent=function(a){if(this.hasTouch){for(var b=[],c=null,d=0,e=a.touches.length;e>d;d++)c=a.touches[d],b.push({x:c.pageX,y:c.pageY});return b}return[{x:a.pageX,y:a.pageY}]},a.getDistance=function(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)},a.getFingers=function(a){return a.touches?a.touches.length:1},a.calScale=function(a,b){if(a.length>=2&&b.length>=2){var c=this.getDistance(a[1],a[0]),d=this.getDistance(b[1],b[0]);return d/c}return 1},a.getAngle=function(a,b){return 180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI},a.getAngle180=function(a,b){var c=Math.atan(-1*(b.y-a.y)/(b.x-a.x))*(180/Math.PI);return 0>c?c+180:c},a.getDirectionFromAngle=function(a){var b={up:-45>a&&a>-135,down:a>=45&&135>a,left:a>=135||-135>=a,right:a>=-45&&45>=a};for(var c in b)if(b[c])return c;return null},a.getXYByElement=function(a){for(var b=0,c=0;a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{left:b,top:c}},a.reset=function(){l=m=n=null,u=s=o=p=!1,q=!1,j={},w=!1},a.isTouchMove=function(a){return"touchmove"===a.type||"mousemove"===a.type},a.isTouchEnd=function(a){return"touchend"===a.type||"mouseup"===a.type||"touchcancel"===a.type},a.env=function(){var a={},b=navigator.userAgent,c=b.match(/(Android)[\s\/]+([\d\.]+)/),d=b.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),e=b.match(/(Windows\s+Phone)\s([\d\.]+)/),f=/WebKit\/[\d.]+/i.test(b),g=d?navigator.standalone?f:/Safari/i.test(b)&&!/CriOS/i.test(b)&&!/MQQBrowser/i.test(b):!1;return c&&(a.android=!0,a.version=c[2]),d&&(a.ios=!0,a.version=d[2].replace(/_/g,"."),a.ios7=/^7/.test(a.version),"iPad"===d[1]?a.ipad=!0:"iPhone"===d[1]?(a.iphone=!0,a.iphone5=568==screen.height):"iPod"===d[1]&&(a.ipod=!0)),e&&(a.wp=!0,a.version=e[2],a.wp8=/^8/.test(a.version)),f&&(a.webkit=!0),g&&(a.safari=!0),a}();var g={proxyid:0,proxies:[],trigger:function(a,b,c){c=c||{};var d,f={bubbles:!0,cancelable:!0,detail:c};try{"undefined"!=typeof CustomEvent?(d=new CustomEvent(b,f),a&&a.dispatchEvent(d)):(d=e.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c),a&&a.dispatchEvent(d))}catch(g){d=e.createEvent("Events"),d.initEvent(b,!0,!0),c&&(d.detail=c),a&&a.dispatchEvent(d)}},bind:function(b,c,d){b.listeners=b.listeners||{},b.listeners[c]?b.listeners[c].push(d):b.listeners[c]=[d];var e=function(b){a.env.ios7&&a.forceReflow(),b.originEvent=b;for(var c in b.detail)"type"!==c&&(b[c]=b.detail[c]);b.startRotate=function(){w=!0};var e=d.call(b.target,b);"undefined"==typeof e||e||(b.stopPropagation(),b.preventDefault())};d.proxy=d.proxy||{},d.proxy[c]?d.proxy[c].push(this.proxyid++):d.proxy[c]=[this.proxyid++],this.proxies.push(e),b.addEventListener&&b.addEventListener(c,e,!1)},unbind:function(a,b,c){if(c){var d=c.proxy[b];d&&d.length&&d.forEach(function(){a.removeEventListener&&a.removeEventListener(b,this.proxies[this.proxyid],!1)})}else{var e=a.listeners[b];e&&e.length&&e.forEach(function(c){a.removeEventListener(b,c,!1)})}},delegate:function(b,c,d,e){var f=function(c){var f,g;c.originEvent=c;for(var h in c.detail)"type"!==h&&(c[h]=c.detail[h]);c.startRotate=function(){w=!0};var i=a.getSelector(b)+" "+d,j=a.matchSelector(c.target,i),k=a.matchSelector(c.target,i+" "+c.target.nodeName);if(!j&&k){for(a.env.ios7&&a.forceReflow(),f=c.target;!a.matchSelector(f,i);)f=f.parentNode;g=e.call(c.target,c),"undefined"==typeof g||g||(c.stopPropagation(),c.preventDefault())}else a.env.ios7&&a.forceReflow(),(j||k)&&(g=e.call(c.target,c),"undefined"==typeof g||g||(c.stopPropagation(),c.preventDefault()))};e.proxy=e.proxy||{},e.proxy[c]?e.proxy[c].push(this.proxyid++):e.proxy[c]=[this.proxyid++],this.proxies.push(f),b.listeners=b.listeners||{},b.listeners[c]?b.listeners[c].push(f):b.listeners[c]=[f],b.addEventListener&&b.addEventListener(c,f,!1)},undelegate:function(a,b,c,d){if(d){var e=d.proxy[b];e.length&&e.forEach(function(){a.removeEventListener&&a.removeEventListener(b,this.proxies[this.proxyid],!1)})}else{var f=a.listeners[b];f.forEach(function(c){a.removeEventListener(b,c,!1)})}}},h={tap:!0,tapMaxDistance:10,hold:!0,tapTime:100,holdTime:650,minScaleRate:0,minRotationAngle:0},i={TAP:"tap",DOUBLE_TAP:"doubletap"},j={start:null,move:null,end:null},k=0,l=null,m=null,n=null,o=!1,p=!1,q=!1,r={},s=!1,t=null,u=!1,v=null,w=!1,x=0,y=0,z=0,A=null,B={tap:function(b){var c=b.target;if(h.tap&&c){var d=Date.now(),e=d-k,f=a.getDistance(j.start[0],j.move?j.move[0]:j.start[0]);if(clearTimeout(t),h.tapMaxDistance<f)return;h.holdTime>e&&a.getFingers(b)<=1&&(u=!0,z=d,A=j.start[0],v=setTimeout(function(){clearTimeout(v),g.trigger(c,i.TAP,{type:i.TAP,originEvent:b,fingersCount:a.getFingers(b),position:A})},h.tapTime))}}},C=function(b){var c=b.target;switch(console.log(c),console.log(b.type),b.type){case f[0]:s=!0,(!j.start||j.start.length<2)&&(j.start=a.getPosOfEvent(b)),a.getFingers(b)>=2&&(x=parseInt(a.getAngle180(j.start[0],j.start[1]),10)),k=Date.now(),l=b,r={};var d=c.getBoundingClientRect(),g=e.documentElement;r={top:d.top+(window.pageYOffset||g.scrollTop)-(g.clientTop||0),left:d.left+(window.pageXOffset||g.scrollLeft)-(g.clientLeft||0)};break;case f[1]:if(!s||!j.start)return;j.move=a.getPosOfEvent(b);break;case f[2]:case f[3]:case"mouseout":if(!s)return;n=b,B.tap(b),a.reset(),x=0,y=0,b.touches&&1===b.touches.length&&(s=!0,w=!0)}},D=function(){var b,c,d=arguments;if(d.length<2||d>4)return console.error("unexpected arguments!");var f="string"===a.getType(d[0])?e.querySelectorAll(d[0]):d[0];return f=f.length?Array.prototype.slice.call(f):[f],3===d.length&&"string"===a.getType(d[1])?(b=d[1].split(" "),c=d[2],void b.forEach(function(b){a.hasTouch||(b=a.getPCevts(b)),f.forEach(function(a){g.bind(a,b,c)})})):void 0},E=function(){var b,c,d=arguments;if(d.length<1||d.length>4)return console.error("unexpected arguments!");var f="string"===a.getType(d[0])?e.querySelectorAll(d[0]):d[0];return f=f.length?Array.prototype.slice.call(f):[f],1===d.length||2===d.length?void f.forEach(function(c){b=d[1]?d[1].split(" "):Object.keys(c.listeners),b.length&&b.forEach(function(b){a.hasTouch||(b=a.getPCevts(b)),g.unbind(c,b),g.undelegate(c,b)})}):3===d.length&&"function"===a.getType(d[2])?(c=d[2],void f.forEach(function(e){b=d[1].split(" "),b.forEach(function(b){a.hasTouch||(b=a.getPCevts(b)),g.unbind(e,b,c)})})):void 0},F=function(b,c,d){var f=arguments;a.hasTouch||(c=a.getPCevts(c));var h="string"===a.getType(f[0])?e.querySelectorAll(f[0]):f[0];h=h.length?Array.prototype.call(h):[h],h.forEach(function(a){g.trigger(a,c,d)})};f.forEach(function(a){e.addEventListener(a,C,!1)});var G={};return G.on=G.bind=G.live=D,G.off=G.unbind=G.die=E,G.config=h,G.trigger=F,G});